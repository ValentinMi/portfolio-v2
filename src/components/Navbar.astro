---
const navItems = [
  { label: "Accueil", href: "#hero" },
  { label: "À propos", href: "#about" },
  { label: "Expériences", href: "#experiences" },
  { label: "Compétences", href: "#skills" },
  { label: "Contact", href: "#contact" },
];
---

<nav class="navbar">
  <div class="nav-container">
    <a href="#hero" class="nav-logo">V.</a>

    <div class="nav-right">
      <div class="nav-overlay"></div>

      <ul class="nav-menu">
        <button class="nav-close" aria-label="Fermer le menu">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="28"
            height="28"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        {
          navItems.map((item) => (
            <li>
              <a href={item.href} class="nav-link">
                {item.label}
              </a>
            </li>
          ))
        }
      </ul>

      <button
        class="nav-toggle"
        aria-label="Toggle navigation"
        aria-expanded="false"
      >
        <span class="hamburger"></span>
      </button>
    </div>
  </div>
</nav>

<script>
  const toggle = document.querySelector(".nav-toggle");
  const menu = document.querySelector(".nav-menu");
  const navbar = document.querySelector(".navbar");
  const overlay = document.querySelector(".nav-overlay");
  const closeBtn = document.querySelector(".nav-close");

  function closeMenu() {
    toggle?.setAttribute("aria-expanded", "false");
    menu?.classList.remove("active");
    overlay?.classList.remove("active");
  }

  function openMenu() {
    toggle?.setAttribute("aria-expanded", "true");
    menu?.classList.add("active");
    overlay?.classList.add("active");
  }

  toggle?.addEventListener("click", () => {
    const isExpanded = toggle.getAttribute("aria-expanded") === "true";
    if (isExpanded) {
      closeMenu();
    } else {
      openMenu();
    }
  });

  overlay?.addEventListener("click", closeMenu);

  closeBtn?.addEventListener("click", closeMenu);

  document.querySelectorAll(".nav-link").forEach((link) => {
    link.addEventListener("click", closeMenu);
  });

  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      navbar?.classList.add("scrolled");
    } else {
      navbar?.classList.remove("scrolled");
    }
  });
</script>

<style>
  .navbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    padding: 1rem 1.5rem;
    transition: all 0.3s ease;
    border-bottom: 1px solid transparent;
  }

  .navbar.scrolled {
    background: rgba(5, 5, 5, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(50, 224, 196, 0.3);
    box-shadow: 0 4px 20px rgba(50, 224, 196, 0.1);
  }

  .nav-container {
    max-width: var(--max-width);
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .nav-right {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .nav-logo {
    font-family: var(--font-heading);
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text);
    text-transform: uppercase;
    letter-spacing: 2px;
    position: relative;
    padding-left: 0.5rem;
  }

  .nav-logo::before {
    content: "";
    position: absolute;
    left: 0;
    top: 10%;
    bottom: 10%;
    width: 4px;
    background: var(--color-primary);
    box-shadow: 0 0 10px var(--color-primary);
  }

  .nav-menu {
    display: flex;
    gap: 2rem;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .nav-link {
    color: var(--color-text-muted);
    font-weight: 500;
    padding: 0.5rem;
    position: relative;
    transition: all 0.3s ease;
    font-size: 0.95rem;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--color-primary);
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 0 10px var(--color-primary);
  }

  .nav-link:hover {
    color: var(--color-primary);
    text-shadow: 0 0 8px rgba(50, 224, 196, 0.4);
  }

  .nav-link:hover::after {
    width: 100%;
  }

  .nav-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
  }

  .hamburger {
    display: block;
    width: 24px;
    height: 2px;
    background: var(--color-primary);
    position: relative;
    transition: all 0.3s ease;
    box-shadow: 0 0 5px var(--color-primary);
  }

  .hamburger::before,
  .hamburger::after {
    content: "";
    position: absolute;
    width: 24px;
    height: 2px;
    background: var(--color-primary);
    transition: all 0.3s ease;
    box-shadow: 0 0 5px var(--color-primary);
  }

  .hamburger::before {
    top: -8px;
  }

  .hamburger::after {
    top: 8px;
  }

  .nav-toggle[aria-expanded="true"] .hamburger {
    background: transparent;
    box-shadow: none;
  }

  .nav-toggle[aria-expanded="true"] .hamburger::before {
    top: 0;
    transform: rotate(45deg);
  }

  .nav-toggle[aria-expanded="true"] .hamburger::after {
    top: 0;
    transform: rotate(-45deg);
  }

  @media (max-width: 768px) {
    .nav-right {
      gap: 1rem;
    }

    .nav-toggle {
      display: block;
    }

    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.6);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 5;
    }

    .nav-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .nav-menu {
      position: fixed;
      top: 0;
      right: -100%;
      width: 80%;
      max-width: 350px;
      height: 100vh;
      background: rgba(5, 5, 5, 0.95);
      backdrop-filter: blur(15px);
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 2.5rem;
      transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      border-left: 1px solid rgba(50, 224, 196, 0.2);
      box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
      z-index: 10;
    }

    .nav-menu.active {
      right: 0;
    }

    .nav-close {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      background: none;
      border: none;
      color: var(--color-text-muted);
      cursor: pointer;
      padding: 0.5rem;
      transition: all 0.2s ease;
    }

    .nav-close:hover {
      color: var(--color-primary);
      transform: scale(1.1);
    }

    .nav-link {
      font-size: 1.5rem;
      font-weight: 700;
    }
  }

  @media (min-width: 769px) {
    .nav-overlay,
    .nav-close {
      display: none;
    }
  }
</style>
